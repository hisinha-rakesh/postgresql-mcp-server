# PostgreSQL MCP Server - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================
# AUTHENTICATION CONFIGURATION
# ============================================
# Choose authentication type: "postgresql" or "entraid"
AUTH_TYPE=postgresql

# ============================================
# OPTION 1: PostgreSQL Traditional Authentication
# ============================================
# Use this for traditional username/password authentication
# Format: postgresql://username:password@hostname:port/database?sslmode=require
# Note: Special characters in password must be URL-encoded (@ becomes %40, # becomes %23, etc.)

# Example for local PostgreSQL:
# DATABASE_URL=postgresql://postgres:mypassword@localhost:5432/mydb

# Example for Azure PostgreSQL (traditional auth):
# DATABASE_URL=postgresql://myuser%40myserver:mypassword@myserver.postgres.database.azure.com:5432/mydb?sslmode=require

# Your DATABASE_URL (required when AUTH_TYPE=postgresql):
DATABASE_URL=postgresql://pgadmina:XXXXXXXXXXXX@pgs-youtube-app.postgres.database.azure.com:5432/postgres?sslmode=require

# ============================================
# OPTION 2: EntraID (Azure AD) Authentication
# ============================================
# Use this for Azure Active Directory / Microsoft Entra ID authentication
# More secure than traditional authentication as it uses access tokens

# PostgreSQL Connection Details (required when AUTH_TYPE=entraid):
# PG_HOST=myserver.postgres.database.azure.com
# PG_PORT=5432
# PG_DATABASE=mydatabase
# PG_USER=myuser@myserver
# PG_SSLMODE=require

# Azure AD Tenant ID (optional for Managed Identity):
# Required if using Service Principal authentication
# AZURE_TENANT_ID=your-tenant-id-here

# Azure AD Application (Service Principal) Credentials (optional):
# Required if using Service Principal authentication
# Leave empty to use Managed Identity or other DefaultAzureCredential methods
# AZURE_CLIENT_ID=your-client-id-here
# AZURE_CLIENT_SECRET=your-client-secret-here

# Token Refresh Settings (optional):
# How many seconds before token expiry to refresh (default: 300 = 5 minutes)
# TOKEN_REFRESH_MARGIN=300

# ============================================
# BACKUP CONFIGURATION
# ============================================
# Default directory for database backups
DEFAULT_BACKUP_DIR=C:\Users\kusha\postgresql-mcp\backups

# ============================================
# AZURE CLAUDE CONFIGURATION (if using Azure OpenAI)
# ============================================
# Note: Use the base endpoint URL (without /anthropic/ suffix)
# The azure-ai-inference SDK handles the correct path automatically
AZURE_API_KEY=your_api_key_here
AZURE_ENDPOINT=https://your-resource-name.cognitiveservices.azure.com
DEPLOYMENT_NAME=claude-sonnet-4-5-2

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================
# NOTES
# ============================================
#
# EntraID Authentication Methods:
# 1. Managed Identity (Azure VMs, App Services, etc.)
#    - No client_id/client_secret needed
#    - Just set AUTH_TYPE=entraid and connection details
#
# 2. Service Principal (Application)
#    - Set AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET
#    - Create App Registration in Azure AD
#    - Grant PostgreSQL permissions to the service principal
#
# 3. Azure CLI
#    - Run 'az login' first
#    - No additional credentials needed
#
# 4. Visual Studio Code
#    - Sign in to Azure in VS Code
#    - No additional credentials needed
#
# Security Best Practices:
# - Never commit .env file to version control
# - Add .env to .gitignore
# - Rotate credentials regularly
# - Use Managed Identity when possible (most secure)
# - Use read-only database users when appropriate
# - Enable SSL/TLS for all connections (sslmode=require)
